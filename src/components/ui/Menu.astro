---
import NavigationItems from "./NavigationItems.astro";
import ThemeButtons from "./ThemeButtons.astro";

---

<script>
  const navButtons = document.querySelectorAll('#hamburger,#closeNavigation');
  const menu = document.querySelector('#headlessui-dialog-1');
navButtons.forEach(x=>{
  x.addEventListener('click', () => {  
  
  menu.classList.toggle('hidden');
  menu.classList.toggle('open');
 
});

});
document.addEventListener('click',(event)=>{
  if(menu.classList.contains("open")){
    const navDialog =document.querySelector('#navDialog');
  const closeButton =document.querySelector('#closeNavigation');
  const hamburger =document.querySelector('#hamburger');
  let clickInside = navDialog.contains(event.target) ;
 // console.log(event.target);
  if (!clickInside  && !event.target.classList.contains("hamburger")) {
  //  console.log('clicked');
          menu.classList.toggle('hidden');
          menu.classList.remove('open');
        }

  }
 
});





</script>
<nav
  class=" w-full flex flex-wrap items-center justify-between py-4 bg-white hover:text-gray-700 focus:text-gray-700 shadow-lg navbar navbar-expand-lg navbar-light sticky top-0 z-50 text-slate-700 dark:text-slate-400 dark:bg-gray-800"
>
  <div
    class="container-fluid w-full flex flex-wrap items-center justify-between px-6"
  >
    <div
      class="font-extrabold justify-start content-center relative flex items-center"
    >
      <h2 class="mr-4 text-2xl font-bold">PlatformDataSecurity Babies</h2>
    </div>

    <div>
      <button class="      
     lg:hidden
      text-gray-500
      border-0
      hover:shadow-none hover:no-underline
      py-2
      px-2.5
      bg-transparent
      focus:outline-none focus:ring-0 focus:shadow-none focus:no-underline
      header-background
    " type="button"   id="hamburger">
  <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars"
    class="hamburger w-6 text-collapsed" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
    <path fill="currentColor" class="hamburger" 
      d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z">
    </path>
  </svg>
 
  </button>
  <div
        class=" hidden  lg:hidden fixed top-0 left-0 right-0 z-50  w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-modal md:h-full"
        id="headlessui-dialog-1"
        role="dialog"
        aria-modal="true"
        data-headlessui-state="open"
      >
        <div
          class=" fixed inset-0 bg-black/20  dark:bg-slate-900/80"
          id="headlessui-dialog-overlay-10"
          aria-hidden="true"
          data-headlessui-state="open"
        >
          <div class="-my-1 ml-2 -mr-1 md:hidden">
          
          </div>
        </div>
        <div
          id="navDialog"
          class=" fixed top-4 right-4 w-full max-w-xs bg-white rounded-lg shadow-lg p-6 text-base font-semibold text-slate-900 dark:bg-slate-800 dark:text-slate-400 dark:highlight-white/5"
        >
          <button
            type="button"
            class="absolute top-5 right-5 w-8 h-8 flex items-center justify-center text-slate-500 hover:text-slate-600 dark:text-slate-400 dark:hover:text-slate-300"
            tabindex="0"
            id="closeNavigation"
          >
            <span class="sr-only">Close navigation</span><svg
              viewBox="0 0 10 10"
              class="w-2.5 h-2.5 overflow-visible"
              aria-hidden="true"
              ><path
                d="M0 0L10 10M10 0L0 10"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"></path>
            </svg>
          </button>
          <NavigationItems/>
          <div
            class="mt-6 pt-6 border-t border-slate-200 dark:border-slate-200/10"
          >
            <div class="flex items-center justify-between">
              <label
                for="theme"
                class="text-slate-700 font-normal dark:text-slate-400"
                >Switch theme</label
              >
              <div
                class="relative flex items-center ring-1 ring-slate-900/10 rounded-lg shadow-sm p-2 text-slate-700 font-semibold dark:bg-slate-600 dark:ring-0 dark:highlight-white/5 dark:text-slate-200"
              >
               <ThemeButtons />
              </div>
            </div>
          </div>
        </div>
      </div>
 

 
    </div>
    <div
      class="collapse navbar-collapse flex-grow items-center navbarSupportedContent"
      id="navbarSupportedContent"
    >
      <!-- Left links -->
      <NavigationItems/>
     <ThemeButtons/>

      <!-- Left links -->
    </div>
    <!-- Collapsible wrapper -->
  </div>
</nav>
